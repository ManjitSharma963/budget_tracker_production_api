# Server Configuration
server.port=8080

# Application Name
spring.application.name=expenses-tracker-backend
# Database Configuration (MySQL)
# Configured to connect to EXTERNAL MySQL database (not in Docker container)
# You can override these values using environment variables:
#   - DB_HOST (default: localhost)
#   - DB_PORT (default: 3306)
#   - DB_NAME (default: expenses_tracker)
#   - DB_USER (default: appuser)
#   - DB_PASSWORD (default: apppass)
# Or set the full URL using: SPRING_DATASOURCE_URL

# Default connection to external MySQL on localhost
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:expenses_tracker}?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true&useServerPrepStmts=true
#spring.datasource.username=${DB_USER:appuser}
#spring.datasource.password=${DB_PASSWORD:apppass}
spring.datasource.username=root
spring.datasource.password=root123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


# HikariCP Connection Pool Configuration (Performance Optimization)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.pool-name=ExpensesTrackerPool

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# JPA Performance Optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false

# Actuator Configuration
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=always

# JWT Configuration
jwt.secret=MySecretKeyForJWTTokenGenerationThatShouldBeAtLeast256BitsLongForHS256AlgorithmToWorkProperlyAndSecurely
jwt.expiration=86400000

# Logging
logging.level.com.expensetracker=DEBUG
logging.level.org.springframework.web=INFO

# Database Initialization
# Set to true to enable automatic table creation from create_table.sql on startup
app.database.initialize=true

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# Server Performance Configuration
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript
server.compression.min-response-size=1024
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.accept-count=100
server.tomcat.max-connections=10000

# Actuator Metrics (for performance monitoring)
management.endpoints.web.exposure.include=health,metrics,prometheus
management.metrics.export.prometheus.enabled=true
management.metrics.enable.jvm=true
management.metrics.enable.http.server.requests=true

